@using Maxim.Model.BaseModel
@using System.Data;
@model LandmarkCompositionMode
@{
    ViewBag.Title = "OrderUpdateCarelable";
    Layout = null;
}

<link href="~/Content/css/WashingSelect.css" rel="stylesheet" />
<script type="text/javascript">

    function funcWashClick(obj) {

        var id = obj.getAttribute("id");
        var values = $("." + id + "").val();
        $("#hfWashCode").val(values);
        console.log(id);
        console.log(values);
        console.log($("#hfWashCode").val());
    }

    function FibreTable(index) {

        $("#hf_index").val(index);
        //$("#detile").css("display", "none");
        //$("#fibre").css("display", "block");
        //$("#wash").css("display", "none");
        var urlPost = "/Carelable/UpdateCareFibre";
        $.post(urlPost, { DetileIndex: index }, function (data, status) {

            var sTrHtml = "";
            $.each(data.Fibres, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += "<td class=center>" + item.category + "</td>";
                sTrHtml += "<td class=center>" + item.Comp + "</td>";
                sTrHtml += "<td class=center>" + item.Fiber + "</td>";
                sTrHtml += "<td class=center>" + "<a href=\"#\"  onclick=\"DetleFibreTable('" + item.ID + "');\">" + "Del</a>&nbsp;&nbsp;<a href=\"#\"  onclick=\"UpdateFibreTable('" + item.ID + "','" + item.category + "','" + item.Comp + "','" + item.Fiber + "');\">" + "Edit</a></td>";
                sTrHtml += "</tr>";
            });
            $("#Madein").val(data.MadeInvalue);
            $("#DrPrint").val(data.Dropprintvalue);
            $("#Order1 tbody").html(sTrHtml);
            $("#txtfabric").val("");
            $("#TextBox_CategoryAdd").val("");
            $("#Drcategory").val("");
            $("#Drfabrie").val("");
            $("#stepa").removeClass('red-em');
            $("#stepa").addClass('gray-em');
            $("#stepb").addClass('red-em');
            $("#stepb").removeClass('gray-em');
            $("#stepb").removeAttr("style");
            $("#stepb").css("color","#000000");
            $("#detile").css("display", "none");
            $("#fibre").slideDown();
        });
    }

    function ADDFibreTable() {

        var hf_EditIDvalue = $("#hf_EditID").val();
        var txtfabricvalue = $("#txtfabric").val();
        var CategoryAddvalue = $("#TextBox_CategoryAdd").val();
        var Drcategoryvalue = $("#Drcategory").val();
        var Drfabrievalue = $("#Drfabrie").val();

        var urlPost = "/Carelable/AddUpdateCareFibre";
        $.post(urlPost, { hf_EditID: hf_EditIDvalue, CategoryAdd: CategoryAddvalue, Drcategory: Drcategoryvalue, Drfabrie: Drfabrievalue, txtfabric: txtfabricvalue }, function (data, status) {
            if (data.HasError) {

                $("#labtxt").html(data.ErrMsg)
                showDiv();
                return false;
            }

            var sTrHtml = "";
            $.each(data.Fibres, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += "<td class=center>" + item.category + "</td>";
                sTrHtml += "<td class=center>" + item.Comp + "</td>";
                sTrHtml += "<td class=center>" + item.Fiber + "</td>";
                sTrHtml += "<td class=center>" + "<a href=\"#\"  onclick=\"DetleFibreTable('" + item.ID + "');\">" + "Del</a>&nbsp;&nbsp;<a href=\"#\"  onclick=\"UpdateFibreTable('" + item.ID + "','" + item.category + "','" + item.Comp + "','" + item.Fiber + "');\">" + "Edit</a></td>";
                sTrHtml += "</tr>";
            });
            $("#Order1 tbody").html(sTrHtml);
            $("#hf_EditID").val("");

            $("#Drcategory").val("");
            $("#Drfabrie").val("");
            $("#TextBox_CategoryAdd").val("");
            $("#txtfabric").val("");
        });

    }

    function DetleFibreTable(editid) {
        var hf_EditIDvalue = editid;
        var CategoryAddvalue = $("#TextBox_CategoryAdd").val();
        var urlPost = "/Carelable/DetUpdateCareFibre";
        $.post(urlPost, { hf_EditID: hf_EditIDvalue, CategoryAdd: CategoryAddvalue }, function (data, status) {
            var sTrHtml = "";
            $.each(data.Fibres, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += "<td class=center>" + item.category + "</td>";
                sTrHtml += "<td class=center>" + item.Comp + "</td>";
                sTrHtml += "<td class=center>" + item.Fiber + "</td>";
                sTrHtml += "<td class=center>" + "<a href=\"#\"  onclick=\"DetleFibreTable('" + item.ID + "');\">" + "Del</a>&nbsp;&nbsp;<a href=\"#\"  onclick=\"UpdateFibreTable('" + item.ID + "','" + item.category + "','" + item.Comp + "','" + item.Fiber + "');\">" + "Edit</a></td>";
                sTrHtml += "</tr>";
            });
            $("#Order1 tbody").html(sTrHtml);

        });

    }

    function UpdateFibreTable(id, category, txtfabricvalue, fabrie) {

        $("#hf_EditID").val(id);
        $("#Drcategory").val(category);
        $("#txtfabric").val(txtfabricvalue);
        $("#Drfabrie").val(fabrie);
    }

    function butSaveClick() {
        var index = $("#hf_index").val();
        var Madeinvalue = $("#Madein").val();
        var DrPrintvalue = $("#DrPrint").val();

        var urlPost = "/Carelable/SaveUpdateCareFibre";
        $.post(urlPost, { DetileIndex: index, Madein: Madeinvalue, DrPrint: DrPrintvalue }, function (data, status) {
            if (data.HasError) {

                $("#labtxt").html(data.ErrMsg)
                showDiv();
                return false;
            }
            var sTrHtml = "";
            var index = 1;
            $.each(data.Views, function (i, item) {
                if (item.CountryOfOrigin != "") {
                    sTrHtml += "<tr>";
                    sTrHtml += "<th class='center'><a href=\"#\" onclick=\"FibreTable('" + item.line + "')\">Edit</a></th>";
                    sTrHtml += "<th class='center'>" + index + "</th>";
                    sTrHtml += "<th class='center'>" + item.CountryOfOrigin + "</th>";
                    sTrHtml += "<th class='center'>" + item.category1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.category2 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp2 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre2 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category3 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp3 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre3 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category4 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp4 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre4 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.category6 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp6 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre6 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category7 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp7 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre7 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category8 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp8 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre8 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category9 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp9 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre9 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category10 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp10 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre10 + "</th>";

                    sTrHtml += "<th class='center'>" + item.Washcare1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare2 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare3 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare4 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare6 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare7 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare8 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare9 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare10 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Symblos + "</th>";
                    sTrHtml += "</tr>";
                    index++;
                }
            });
            $("#Order5 tbody").html(sTrHtml);
            $("#stepa").removeClass('gray-em');
            $("#stepa").addClass('red-em');
            $("#stepb").css("display", "none");
            $("#stepc").css("display", "none");
            $("#detile").slideDown();
            $("#fibre").css("display", "none");
            $("#wash").css("display", "none");
        });

    }

    function butNextClick() {

        var index = $("#hf_index").val();
        var Madeinvalue = $("#Madein").val();
        var DrPrintvalue = $("#DrPrint").val();
        $("#drwashgroupid").get(0).selectedIndex = 0;
        $("#WASHING").get(0).selectedIndex = 0;
        var urlPost = "/Carelable/butNextCareFibre";
        $.post(urlPost, { DetileIndex: index, Madein: Madeinvalue, DrPrint: DrPrintvalue }, function (data, status) {
            var sTrHtml = "";
            $.each(data.Compositions, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += " <td>" + item.Washcare + "</td>";
                sTrHtml += " <td>";
                var _tLineData = item.Type + "^" + item.Washcare;
                sTrHtml += "<input id='hflineType' name ='hflineType' type='hidden' value='" + item.Type + "' >";
                sTrHtml += "<input id='hflineData' name ='hflineType' type='hidden' value='" + _tLineData + "' >";
                sTrHtml += "<button type='button' id='btnDelWashCareLine' class='btn btn-default' value='" + _tLineData + "' name=" + item.ID + "  onclick='return DetleCompositionsTable(this)' style='border: 1px solid #D6D6D6;margin: 0;'>Del</button>";
                sTrHtml += "</td>";
                sTrHtml += "</tr>";
            });
            $("#Order2 tbody").html(sTrHtml);



            $("#hfWashCode").val(data.DefaultDropWashCode);
            // $("#hfWashCode").val(data.DropWashCode);




            var a = $("#dropdown_show").find("button").length
            if (a == "0") {

                $('.selectpicker').each(function () {
                    syncDropdown(this, createDropdown(this));
                });

            }



            $("#stepc").removeAttr("style");
            $("#stepc").addClass('red-em');
            $("#stepc").css("color","#000000");
            $("#stepc").removeClass('gray-em');
            $("#stepb").removeClass('red-em');
            $("#stepb").addClass('gray-em');
            $("#fibre").css("display", "none");
            $("#detile").css("display", "none");
            $("#wash").slideDown();
        });
    }

    function DetleCompositionsTable(obj) {

        var hf_EditIDvalue = $(obj).attr("name");
        var urlPost = "/Carelable/DetUpdateCompositions";
        $.post(urlPost, { hf_EditID: hf_EditIDvalue }, function (data, status) {
            var sTrHtml = "";
            $.each(data.Compositions, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += " <td>" + item.Washcare + "</td>";
                sTrHtml += " <td>";
                var _tLineData = item.Type + "^" + item.Washcare;
                sTrHtml += "<input id='hflineType' name ='hflineType' type='hidden' value='" + item.Type + "' >";
                sTrHtml += "<input id='hflineData' name ='hflineType' type='hidden' value='" + _tLineData + "' >";
                sTrHtml += "<button type='button' id='btnDelWashCareLine' class='btn btn-default' value='" + _tLineData + "' name=" + item.ID + "  onclick='return DetleCompositionsTable(this)' style='border: 1px solid #D6D6D6;margin: 0;'>Del</button>";
                sTrHtml += "</td>";
                sTrHtml += "</tr>";
            });
            $("#Order2 tbody").html(sTrHtml);
            $(obj).parent().parent().remove();
            tWashType = $(obj).siblings().eq(0).val().replace(" ", "");

            $("#" + tWashType + "").removeAttr("disabled");
            $("#dropdownMenu" + tWashType + "").removeAttr("disabled");
            $("#dropdownMenu" + tWashType + "").prop('selectedIndex', 0);
            $("#dropdownMenu" + tWashType + " .text").html("--Please Select--");
        });

    }

    function CompositionsTable() {
        var ComGroup = $("#drwashgroupid").val();
        var urlPost = "/Carelable/CompositionsTable";
        $.post(urlPost, { Group: ComGroup }, function (data, status) {
            if (data.HasError) {

                $("#labtxt").html(data.ErrMsg)
                showDiv();
                return false;
            }
            var sTrHtml = "";
            $.each(data.Compositions, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += " <td>" + item.Washcare + "</td>";
                sTrHtml += " <td>";
                var _tLineData = item.Type + "^" + item.Washcare;
                sTrHtml += "<input id='hflineType' name ='hflineType' type='hidden' value='" + item.Type + "' >";
                sTrHtml += "<input id='hflineData' name ='hflineType' type='hidden' value='" + _tLineData + "' >";
                sTrHtml += "<button type='button' id='btnDelWashCareLine' class='btn btn-default' value='" + _tLineData + "' name=" + item.ID + "  onclick='return DetleCompositionsTable(this)' style='border: 1px solid #D6D6D6;margin: 0;'>Del</button>";
                sTrHtml += "</td>";
                sTrHtml += "</tr>";
            });
            $("#Order2 tbody").html(sTrHtml);

        });

    }

    function AddCompositionsTable() {
        var WASHING = $("#WASHING option:selected").val();
        var BLEACHING = $("#BLEACHING option:selected").val();
        var TUMBLEDRY = $("#TUMBLEDRY option:selected").val();
        var HANGdry = $("#HANGdry option:selected").val();
        var WRINGING = $("#WRINGING option:selected").val();
        var DRYCLEANING = $("#DRYCLEANING option:selected").val();
        var IRONING = $("#IRONING option:selected").val();
        var MISC = $("#MISC option:selected").val();

        if (WASHING == "" && BLEACHING == "" && TUMBLEDRY == "" && HANGdry == "" && WRINGING == "" && DRYCLEANING == "" && IRONING == "" && MISC == "") {
            //alert("Please select one wash")
            $("#labtxt").html("Please select one wash");
            showDiv();
            return false;
        }

        selectWashList = new Array();
        selectWashList[0] = WASHING + '^' + "WASHING";
        selectWashList[1] = BLEACHING + '^' + "BLEACHING";
        selectWashList[2] = TUMBLEDRY + '^' + "TUMBLED RY";
        selectWashList[3] = HANGdry + '^' + "HANG dry";
        selectWashList[4] = WRINGING + '^' + "WRINGING";
        selectWashList[5] = DRYCLEANING + '^' + "DRY CLEANING";
        selectWashList[6] = IRONING + '^' + "IRONING";
        selectWashList[7] = MISC + '^' + "MISC";

        var ComGroup = "";
        for (var i = 0; i < selectWashList.length; i++) {



            var tWashType_ = "";
            var SelectWashIstr = selectWashList[i].split('^')[0];
            var tWashType = selectWashList[i].split('^')[1];
            if (tWashType.indexOf(" ") > 0) {
                tWashType_ = tWashType.replace(" ", "")
            }
            else { tWashType_ = tWashType; }

            //$("#" + tWashType_ + "").prop('selectedIndex', 0);
            //$("#dropdownMenu" + tWashType_ + "").prop('selectedIndex', 0);
            //$("#dropdownMenu" + tWashType_ + " .text").html("--Please Select--");
            if (SelectWashIstr != "") {


                var _tLineData = tWashType + "^" + SelectWashIstr + "-";
                console.log(_tLineData);
                ComGroup += _tLineData
            }
        }
        //for (var i = 0; i < arry.length; i++) {
        //    console.log("1"+arry[i]);
        //    ComGroup += arry[i];
        //    console.log("2"+ComGroup);
        //}
        //return false;
        //console.log(ComGroup);

        //var typevalue = $("#hfCurrentWashType").val();
        var urlPost = "/Carelable/AddCompositionsTable";
        $.post(urlPost, ComGroup, function (data, status) {
            if (data.HasError) {
                var twlist = ComGroup.split('-');
                for (var i = 0; i < twlist.length - 1; i++) {
                    var tWashType = twlist[i].split('^')[0];
                    if (tWashType.indexOf(" ") > 0) {
                        tWashType = tWashType.replace(" ", "")
                    }

                    $("#" + tWashType + "").prop('selectedIndex', 0);
                    console.log("#" + tWashType + "");
                    console.log("#dropdownMenu" + tWashType + " .text");
                    $("#dropdownMenu" + tWashType + "").prop('selectedIndex', 0);
                    $("#dropdownMenu" + tWashType + " .text").html("--Please Select--");
                }
                $("#labtxt").html(data.ErrMsg)
                showDiv();
                return false;

            }
            var twlist = ComGroup.split('-');
            for (var i = 0; i < twlist.length - 1; i++) {
                var tWashType = twlist[i].split('^')[0];
                if (tWashType.indexOf(" ") > 0) {
                    tWashType = tWashType.replace(" ", "")
                }
                $("#" + tWashType + "").prop('selectedIndex', 0);

                if (tWashType != "MISC") {
                    $("#" + tWashType + "").attr("disabled", "disabled");

                    $("#dropdownMenu" + tWashType + "").attr("disabled", "disabled");

                }
                else {
                    console.log("#dropdownMenu" + tWashType + "");
                    $("#dropdownMenu" + tWashType + "").prop('selectedIndex', 0);
                    $("#dropdownMenu" + tWashType + " .text").html("--Please Select--");
                }
            }
            var sTrHtml = "";
            $.each(data.Compositions, function (i, item) {
                sTrHtml += "<tr>";
                sTrHtml += " <td>" + item.Washcare + "</td>";
                sTrHtml += " <td>";
                var _tLineData = item.Type + "^" + item.Washcare;
                sTrHtml += "<input id='hflineType' name ='hflineType' type='hidden' value='" + item.Type + "' >";
                sTrHtml += "<input id='hflineData' name ='hflineType' type='hidden' value='" + _tLineData + "' >";
                sTrHtml += "<button type='button' id='btnDelWashCareLine' class='btn btn-default' value='" + _tLineData + "' name=" + item.ID + "  onclick='return DetleCompositionsTable(this)' style='border: 1px solid #D6D6D6;margin: 0;'>Del</button>";
                sTrHtml += "</td>";
                sTrHtml += "</tr>";
            });
            $("#Order2 tbody").html(sTrHtml);

        });
    }

    function butSaveComposition() {
        var index = $("#hf_index").val();
        var Madeinvalue = $("#Madein").val();
        var DrPrintvalue = $("#DrPrint").val();
        if ($("#Order2 tr").length >= 12) {
            $("#labtxt").html("The number of washing instruction cannot exceed ten.");
            showDiv();
            return false;
        }
        else
        {
        var urlPost = "/Carelable/SaveUpdateCareComposition";
        $.post(urlPost, { DetileIndex: index, Madein: Madeinvalue, DrPrint: DrPrintvalue }, function (data, status) {
            if (data.HasError) {

                $("#labtxt").html(data.ErrMsg)
                showDiv();
                return false;
            }
            var sTrHtml = "";
            var index = 1;
            $.each(data.Views, function (i, item) {
                if (item.CountryOfOrigin != "") {
                    sTrHtml += "<tr>";
                    sTrHtml += "<th class='center'><a href=\"#\" onclick=\"FibreTable('" + item.line + "')\">Edit</a></th>";
                    sTrHtml += "<th class='center'>" + index + "</th>";
                    sTrHtml += "<th class='center'>" + item.CountryOfOrigin + "</th>";
                    sTrHtml += "<th class='center'>" + item.category1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.category2 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp2 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre2 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category3 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp3 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre3 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category4 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp4 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre4 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.category6 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp6 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre6 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category7 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp7 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre7 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category8 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp8 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre8 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category9 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp9 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre9 + "</th>";

                    sTrHtml += "<th class='center'>" + item.category10 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Comp10 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Fibre10 + "</th>";

                    sTrHtml += "<th class='center'>" + item.Washcare1 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare2 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare3 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare4 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare5 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare6 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare7 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare8 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare9 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Washcare10 + "</th>";
                    sTrHtml += "<th class='center'>" + item.Symblos + "</th>";
                    sTrHtml += "</tr>";
                    index++;
                }
            });
            $("#Order5 tbody").html(sTrHtml);
            $("#Order5 tbody").html(sTrHtml);
            $("#stepa").removeClass('gray-em');
            $("#stepa").addClass('red-em');
            $("#stepb").css("display", "none");
            $("#stepc").css("display", "none");
            $("#detile").slideDown();
            $("#fibre").css("display", "none");
            $("#wash").css("display", "none");
        });
        }
    }

    function SaveGenerateArtwork()
    {
        var urlPost = "/Carelable/SaveGenerateArtwork";
        $.post(urlPost, null, function (data, status) {
            if (data.HasError) {
            }
        });

    }

    $(function () {
        $("#stepa").add("#Back1").click(function () {
            $("#stepa").removeClass('gray-em');
            $("#stepa").addClass('red-em');
            $("#stepb").css("display", "none");
            $("#stepc").css("display", "none");
            $("#detile"). slideDown();
            $("#fibre").css("display", "none");
            $("#wash").css("display", "none");
        });
        $("#stepb").add("#Back2").click(function () {
            $("#stepb").removeClass('gray-em');
            $("#stepb").addClass('red-em');
            $("#stepc").css("display", "none");
            $("#fibre").slideDown();
            $("#detile").css("display", "none");
            $("#wash").css("display", "none");
        });


    });

</script>

@using (Html.BeginForm("OrderUpdateCarelable", "Carelable", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    <input type="hidden" value="" id="hf_EditID" />
    <input type="hidden" value="" id="hf_index" />
    <input type="hidden" value="WASHING" id="hfCurrentWashType" />

    <h2 class="title clearfix">
        <em class="red-em" id="stepa" style="color:#000000;">View Carelable</em>
        <em class="gray-em" id="stepb" style="display:none;width: 320px;">Fiber and Country of Origin</em>
        <em class="gray-em" id="stepc" style="display:none;">Washing Instructions</em>
    </h2>
    @*detile*@
    <div id="detile">
        <div id="Gridview" class="dataTables_wrapper form-inline" role="grid">

            <table id="Order5" class="table table-striped table-bordered table-hover table-full-width dataTable" aria-describedby="sample_2_info">
                <thead>
                    <tr class="head">
                        <th class="center"></th>
                        <th class="center">Line#</th>
                        <th class="center">CountryOfOrigin</th>
                        <th class="center">category1</th>
                        <th class="center">Comp1</th>
                        <th class="center">Fibre1</th>

                        <th class="center">category2</th>
                        <th class="center">Comp2</th>
                        <th class="center">Fibre2</th>

                        <th class="center">category3</th>
                        <th class="center">Comp3</th>
                        <th class="center">Fibre3</th>

                        <th class="center">category4</th>
                        <th class="center">Comp4</th>
                        <th class="center">Fibre4</th>

                        <th class="center">category5</th>
                        <th class="center">Comp5</th>
                        <th class="center">Fibre5</th>

                        <th class="center">category6</th>
                        <th class="center">Comp6</th>
                        <th class="center">Fibre6</th>

                        <th class="center">category7</th>
                        <th class="center">Comp7</th>
                        <th class="center">Fibre7</th>

                        <th class="center">category8</th>
                        <th class="center">Comp8</th>
                        <th class="center">Fibre8</th>

                        <th class="center">category9</th>
                        <th class="center">Comp9</th>
                        <th class="center">Fibre9</th>

                        <th class="center">category10</th>
                        <th class="center">Comp10</th>
                        <th class="center">Fibre10</th>

                        <th class="center">Washcare1</th>
                        <th class="center">Washcare2</th>
                        <th class="center">Washcare3</th>
                        <th class="center">Washcare4</th>
                        <th class="center">Washcare5</th>
                        <th class="center">Washcare6</th>
                        <th class="center">Washcare7</th>
                        <th class="center">Washcare8</th>
                        <th class="center">Washcare9</th>
                        <th class="center">Washcare10</th>
                        <th class="center">Symblos</th>
                    </tr>
                </thead>
                <tbody class="OrderDetail">
                    @{
                        if (Model.Views != null)
                        {
                            var index = 1;
                            foreach (var item in Model.Views)
                            {
                                if (item.CountryOfOrigin != "")
                                {
                                    <tr>
                                        <th class="center"><a href="#" onclick="FibreTable('@item.line')">Edit</a></th>
                                        <th class="center">@index</th>
                                        <th class="center">@item.CountryOfOrigin</th>
                                        <th class="center">@item.category1</th>
                                        <th class="center">@item.Comp1</th>
                                        <th class="center">@item.Fibre1</th>
                                        <th class="center">@item.category2</th>
                                        <th class="center">@item.Comp2</th>
                                        <th class="center">@item.Fibre2</th>

                                        <th class="center">@item.category3</th>
                                        <th class="center">@item.Comp3</th>
                                        <th class="center">@item.Fibre3</th>

                                        <th class="center">@item.category4</th>
                                        <th class="center">@item.Comp4</th>
                                        <th class="center">@item.Fibre4</th>

                                        <th class="center">@item.category5</th>
                                        <th class="center">@item.Comp5</th>
                                        <th class="center">@item.Fibre5</th>

                                        <th class="center">@item.category6</th>
                                        <th class="center">@item.Comp6</th>
                                        <th class="center">@item.Fibre6</th>

                                        <th class="center">@item.category7</th>
                                        <th class="center">@item.Comp7</th>
                                        <th class="center">@item.Fibre7</th>

                                        <th class="center">@item.category8</th>
                                        <th class="center">@item.Comp8</th>
                                        <th class="center">@item.Fibre8</th>

                                        <th class="center">@item.category9</th>
                                        <th class="center">@item.Comp9</th>
                                        <th class="center">@item.Fibre9</th>

                                        <th class="center">@item.category10</th>
                                        <th class="center">@item.Comp10</th>
                                        <th class="center">@item.Fibre10</th>

                                        <th class="center">@item.Washcare1</th>
                                        <th class="center">@item.Washcare2</th>
                                        <th class="center">@item.Washcare3</th>
                                        <th class="center">@item.Washcare4</th>
                                        <th class="center">@item.Washcare5</th>
                                        <th class="center">@item.Washcare6</th>
                                        <th class="center">@item.Washcare7</th>
                                        <th class="center">@item.Washcare8</th>
                                        <th class="center">@item.Washcare9</th>
                                        <th class="center">@item.Washcare10</th>
                                        <th class="center">@item.Symblos</th>
                                    </tr>
                                    index++;
                                }
                            }
                        }
                    }
                </tbody>
            </table>


        </div>
        <div class="row-fluid">
            <div class="span4">
                <button type="button" class="btn btn-default" style="border: 1px solid #D6D6D6;" onclick="SaveGenerateArtwork()">Generate Artwork</button>

            </div>
            <div class="span4">

            </div>
            <div class="span4">

            </div>
        </div>

    </div>
    @*fibre*@
                        <div id="fibre" style="display:none">
                            @*第一行*@
                            <div class="row-fluid">
                                <div class="span2 span2_hide">

                                    <div class="control-group">

                                        <label class="control-label" for="firstName"></label>

                                        <div class="controls">
                                        </div>

                                    </div>

                                </div>
                                <div class="span4 ">

                                    <div class="control-group">

                                        <label class="control-label" for="firstName">Made In:</label>

                                        <div class="controls">

                                            @Html.DropDownListFor(x => x.MadeInvalue, Model.MadeIns, new { id = "Madein", @class = "m-wrap span8" })



                                        </div>

                                    </div>

                                </div>
                                <div class="span4 ">

                                    <div class="control-group">

                                        <label class="control-label" for="lastName">Print "EXCLUSIVE  OF DECORATION" :</label>

                                        <div class="controls">
                                            @Html.DropDownListFor(x => x.Dropprintvalue, Model.Dropprints, new { id = "DrPrint", @class = "m-wrap span8" })
                                        </div>

                                    </div>

                                </div>

                            </div>
                            @*第二行*@
                            <div class="row-fluid">
                                <div class="span2 span2_hide">
                                    <div class="control-group">
                                        <label class="control-label" for="firstName"></label>
                                        <div class="controls">
                                        </div>
                                    </div>

                                </div>
                                <div class="span4 ">

                                    <div class="control-group">

                                        <label class="control-label" for="firstName">Category:</label>

                                        <div class="controls">

                                            @Html.DropDownListFor(x => x.drocategoryvalue, Model.drocategorys, new { id = "Drcategory", @class = "m-wrap span8" })



                                        </div>

                                    </div>

                                </div>
                                <div class="span4 ">

                                    <div class="control-group">

                                        <label class="control-label" for="lastName">Fiber:</label>

                                        <div class="controls">
                                            <input id='txtfabric' name='txtfabric' value="" type="text" class="m-wrap span2" />%
                                            @Html.DropDownListFor(x => x.drofabricvalue, Model.drofabrics, new { id = "Drfabrie", @class = "m-wrap span4" })
                                            <button type="button" id="btnAdd" class="btn" value="Add" style="border: 1px solid #D6D6D6;margin-top: -13px;" onclick="return ADDFibreTable();">Add</button>
                                        </div>

                                    </div>

                                </div>

                            </div>
                            @*Table*@
                            <div class="portlet-body">
                                <div id="Gridview" class="dataTables_wrapper form-inline" role="grid">
                                    <table id="Order1" class="table table-striped table-bordered table-hover table-full-width dataTable" aria-describedby="sample_2_info">
                                        <thead>
                                            <tr class="head">
                                                <td class="center">Category</td>
                                                <td class="center">%</td>
                                                <td class="center">Fiber</td>
                                                <td class="center">Edit</td>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>

                                </div>
                            </div>

                            <div class="row-fluid">
                                <div class="span4">

                                </div>
                                <div class="span4">
                                    <button type="button" ID="butSave" value="Save" class="btn btn-default" style="border: 1px solid #D6D6D6;" onclick="butSaveClick()">Save</button>
                                    <button type="button" ID="butnext" value="Care Instructions" class="btn btn-default" style="border: 1px solid #D6D6D6;" onclick="butNextClick()">Care Instructions</button>
                                    <button type="button" ID="Back1" value="butBack" class="btn btn-default" style="border: 1px solid #D6D6D6;">Back</button>
                                </div>
                                <div class="span4">

                                </div>
                            </div>





                        </div>
                        @*wash*@
                        <div id="wash" style="display:none" class="clearfix ron">

                            <b style="font-size:14px;">Commonly-used Washing Instruction:</b>
                            @Html.DropDownListFor(x => x.drwashgroupvalue, Model.drwashgroup, new { id = "drwashgroupid", @class = "large m-wrap" })
                            <button type="button" ID="Button2" value="Add" class="btn btn-default" onclick="CompositionsTable()" style="border: 1px solid #D6D6D6;margin-top: -9px;">Add</button>


                            <div class="clearfix" style="margin-bottom:20px;margin-left:13%;">
                                <ul class="main_left">
                                    <li>
                                        <span style="margin-top:10px;">WASHING</span>:
                                        @Html.DropDownListFor(x => x.drwashvalue, Model.drwash, new { id = "WASHING", @class = "selectpicker" })
                                        &nbsp;&nbsp;&nbsp;&nbsp;

                                    </li>
                                    <li>
                                        <span style="margin-top:10px;">BLEACHING</span>:
                                        <select id='BLEACHING' name="" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropB)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                    </li>
                                    <li>
                                        <span style="margin-top:10px;">TUMBLE DRY</span>:
                                        <select id='TUMBLEDRY' name="" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropT)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                    </li>
                                    <li>
                                        <span style="margin-top:10px;">HANG dry</span>:
                                        <select id='HANGdry' name="" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropH)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                    </li>
                                    <li>
                                        <span style="margin-top:10px;">WRINGING</span>:
                                        <select id='WRINGING' name="WRINGING" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropW)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                    </li>
                                    <li>
                                        <span style="margin-top:10px;">DRY CLEANING</span>:
                                        <select id='DRYCLEANING' name="" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropD)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                    </li>
                                    <li>
                                        <span style="margin-top:10px;">IRONING</span>:
                                        <select id='IRONING' name="IRONING" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropI)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                    </li>
                                    <li style="width:600px;">
                                        <span style="margin-top:10px;">MISC</span>:
                                        <select id='MISC' name="" style="width: 220px !important;" class="selectpicker">
                                            @foreach (var item in Model.DefaultCareInstrDropM)
                                            {
                                                <option value='@Html.DisplayFor(modelItem => item.Value)'> @Html.DisplayFor(modelItem => item.Text)</option>
                                            }
                                        </select>
                                        <button type="button" ID="butwashadd" value="Add" class="btn btn-default" onclick="AddCompositionsTable()" style="margin-top:0;border: 1px solid #D6D6D6">Add</button>
                                    </li>
                                </ul>

                            </div>
                            <div class="portlet-body">
                                <div id="Gridview" class="dataTables_wrapper form-inline" role="grid" style="width:50%;">
                                    <table id="Order2" class="table table-striped table-bordered table-hover table-full-width dataTable">
                                        <thead>
                                            <tr class="head">
                                                <td class="center">Washing Instructions</td>
                                                <td class="center"></td>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                    <div class="clearfix main_submit">
                                        <button type="button" ID="butSave" value="Save" class="btn btn-default" onclick="butSaveComposition()" style="border: 1px solid #D6D6D6;">Save</button>
                                        <button type="button" ID="Back2" value="butBack" class="btn btn-default" style="border: 1px solid #D6D6D6;">Back</button>
                                    </div>
                                </div>
                            </div>


                        </div>

                        @*<input id="hfWashCode" name="hfWashCode" type="hidden" value="['','C','F','W','B','A','D','E']">*@

                        <input class="dropdownMenuWASHING" name="dropdownMenuWASHING" type="hidden" value='@Model.DefaultDropWashCodew'>
                        <input class="dropdownMenuBLEACHING" name="dropdownMenuBLEACHING" type="hidden" value='@Model.DefaultDropWashCodeB'>
                        <input class="dropdownMenuTUMBLEDRY" name="dropdownMenuTUMBLEDRY" type="hidden" value='@Model.DefaultDropWashCodeT'>
                        <input class="dropdownMenuHANGdry" name="dropdownMenuHANGdry" type="hidden" value='@Model.DefaultDropWashCodeH'>
                        <input class="dropdownMenuWRINGING" name="dropdownMenuWRINGING" type="hidden" value='@Model.DefaultDropWashCodeW'>
                        <input class="dropdownMenuDRYCLEANING" name="dropdownMenuDRYCLEANING" type="hidden" value='@Model.DefaultDropWashCodeD'>
                        <input class="dropdownMenuIRONING" name="dropdownMenuIRONING" type="hidden" value='@Model.DefaultDropWashCodeI'>
                        <input class="dropdownMenuMISC" name="dropdownMenuMISC" type="hidden" value='@Model.DefaultDropWashCodeM'>
                        <input id="hfWashCode" name="hfWashCode" type="hidden" value="">


                        <div id="divWashImage" style="display:none;position:absolute;z-index:1001"><img src="#" alt="" style="height:35px;" /></div>
                        @*<script src="../dlls/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>*@
                        @*<script src="../dlls/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>*@
                        <script type="text/javascript">
                            if (typeof jQuery === 'undefined') {
                                throw new Error('Bootstrap\'s JavaScript requires jQuery')
                            }

                            function createDropdown(ele) {
                                if (!ele || !ele.nodeName || ele.nodeName != "SELECT") return;
                                var id = 'dropdownMenu' + ele.id;
                                var li = '';
                                for (var i = 0; i < ele.options.length; i++) {
                                    li += '<li role="presentation">'
                                + '<a role="menuitem" tabindex="-1">'
                                + ele.options[i].text
                                + '</a>'
                                + '</li>';
                                }

                                var drop = '<div id="dropdown_show" class="dropdown">'
                                + '<button type="button" class="btn dropdown-toggle" id="' + id + '" data-toggle="dropdown" onclick="funcWashClick(this)" style="background: #eaeaea;margin-top:0;" >'
                                + '<span class="text">' + ele.options[ele.selectedIndex].text + '</span>'
                                + '</button>'
                                + '<ul class="dropdown-menu" role="menu" aria-labelledby="' + id + '">'
                                + li
                                + '</ul>'
                                + '</div>';

                                var dropdownEle = $(drop);
                                $(ele).after(dropdownEle).hide();
                                return dropdownEle[0];
                            }

                            function syncDropdown(selectEle, dropdownEle) {

                                if (!selectEle || !selectEle.nodeName || selectEle.nodeName != "SELECT") return;
                                if (!dropdownEle || !dropdownEle.nodeName || dropdownEle.nodeName != "DIV") return;

                                var showtext = $(dropdownEle).find(".text");
                                var lis = $(dropdownEle).find("ul > li");


                                lis.each(function (index, domEle) {
                                    $(domEle).click(function () {
                                        selectEle.selectedIndex = index;
                                        showtext.text($(domEle).text());
                                    }).mouseover(function () {
                                        var washcode = eval(document.getElementById("hfWashCode").value);
                                        if (washcode[index].length != 0) {
                                            //var offset = $(domEle).offset();
                                            //var left = offset.left + 'px';
                                            //var top = offset.top + 'px';
                                            $("#divWashImage").show().find("img").attr('src', '../../images/proImages/Landmark/' + washcode[index] + '.jpg');
                                        }
                                        console.log('show: ' + washcode[index]);
                                    }).mouseout(function () {
                                        $("#divWashImage").hide();
                                    }).mousemove(function (e) {
                                        $("#divWashImage").css({ 'top': e.pageY + 15, 'left': e.pageX + 10 });
                                    });
                                });
                            }

                            $(function () {
                                $('.selectpicker').each(function () {
                                    syncDropdown(this, createDropdown(this));
                                });
                            });


                            //bootstrap end
                        </script>
                                    @*<script src="~/scripts/bootstrap.min.js"></script> //login 和 foot 页面有，重复加载 单独调试才打开*@
                        }


